[gd_scene load_steps=35 format=3 uid="uid://j5ylltbkvldv"]

[ext_resource type="Script" uid="uid://bbn1cbvpoujgq" path="res://RoundController.cs" id="1_huihk"]
[ext_resource type="PackedScene" uid="uid://5wachrcb51g2" path="res://Components/player.tscn" id="1_pq8q7"]
[ext_resource type="Script" uid="uid://can4v8h0dvtnv" path="res://Components/Exit.cs" id="1_vyht1"]
[ext_resource type="PackedScene" uid="uid://d2byd0f0uc1en" path="res://Components/control_panel.tscn" id="2_pyidc"]
[ext_resource type="Texture2D" uid="uid://dt6dm7pqsmlu6" path="res://Art/TMP/fishfood.png" id="5_jnlp7"]
[ext_resource type="Script" uid="uid://cu8pgvmnqt2r5" path="res://Components/FoodPile.cs" id="5_l8v81"]
[ext_resource type="Texture2D" uid="uid://xjolg3howhs1" path="res://Art/Tiles/sidewall.png" id="5_r3r3k"]
[ext_resource type="PackedScene" uid="uid://poumb1rm7n8k" path="res://Components/prompt.tscn" id="6_l8v81"]
[ext_resource type="PackedScene" uid="uid://dorax4r82p8aj" path="res://Components/fish_tank.tscn" id="8_bf3um"]
[ext_resource type="PackedScene" uid="uid://dqeu77asqcmel" path="res://Components/canvas_layer.tscn" id="8_huihk"]
[ext_resource type="Texture2D" uid="uid://c4q73mw4ut4su" path="res://Art/Environment/tank1.png" id="8_tw3kd"]
[ext_resource type="Texture2D" uid="uid://ov2nvqdonx8s" path="res://Art/TMP/bubble_small_deepfeast.png" id="9_gd4vy"]
[ext_resource type="Texture2D" uid="uid://dq83kh60hy3er" path="res://Art/Environment/tank2.png" id="9_tw3kd"]
[ext_resource type="PackedScene" uid="uid://d18bwd6kkm430" path="res://Components/beast_stealth_mode.tscn" id="10_gd4vy"]
[ext_resource type="Texture2D" uid="uid://dhf6t3gfaerlg" path="res://Art/Environment/tankbeast.png" id="11_qw60f"]
[ext_resource type="Script" uid="uid://dwl7ervxn8txr" path="res://RoundData.cs" id="17_50g4q"]
[ext_resource type="Texture2D" uid="uid://dxlabsq6wha7l" path="res://Art/Tiles/floor.png" id="17_blcw0"]
[ext_resource type="PackedScene" uid="uid://dug7swaxvoc7i" path="res://Components/obstacle.tscn" id="18_blcw0"]
[ext_resource type="Script" uid="uid://bexfebqtts6oe" path="res://Components/BeastRoute.cs" id="20_vte5o"]
[ext_resource type="PackedScene" uid="uid://b4tjf5hx85x4r" path="res://Components/beast_waypoint.tscn" id="21_po8fv"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_vyht1"]
size = Vector2(49, 80.5)

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_pq8q7"]

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_vvh5c"]

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_pyidc"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_jnlp7"]

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_50g4q"]
polygon = PackedVector2Array(-96.5, -123.5, 96.5, -123.5, 96.5, 123.5, -96.5, 123.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_3dlgs"]
size = Vector2(193, 247)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_vte5o"]
polygon = PackedVector2Array(-64, -77.5, 64, -77.5, 64, 77.5, -64, 77.5)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ab83r"]
size = Vector2(128, 155)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_3dlgs"]
polygon = PackedVector2Array(-65.5, -102, 65.5, -102, 65.5, 102, -65.5, 102)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_po8fv"]
size = Vector2(131, 204)

[sub_resource type="OccluderPolygon2D" id="OccluderPolygon2D_po8fv"]
polygon = PackedVector2Array(-48, -64, 48, -64, 48, 64, -48, 64)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ub8w1"]
size = Vector2(96, 126)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ynlg5"]
size = Vector2(96, 128)

[node name="Root" type="Node2D" node_paths=PackedStringArray("BeastStealthMode", "Beast", "RoundData", "RoundLabelDebug")]
script = ExtResource("1_huihk")
BeastStealthMode = NodePath("BeastStealthMode")
Beast = NodePath("FishTanks/BeastTank/Fish")
RoundData = [NodePath("StealthRoute1"), NodePath("StealthRound2")]
RoundLabelDebug = NodePath("RoundDebugLabel")

[node name="Background" type="ColorRect" parent="."]
z_index = -1
offset_left = -3173.0
offset_top = -1577.0
offset_right = 3968.0
offset_bottom = 24.0
color = Color(0.71253425, 0.7411765, 0.6, 1)

[node name="ControlPanel" parent="." instance=ExtResource("2_pyidc")]
offset_left = -730.0
offset_right = -593.0

[node name="Exit" type="ColorRect" parent="." node_paths=PackedStringArray("area2D")]
offset_left = 846.0
offset_top = -175.0
offset_right = 965.0
offset_bottom = 15.0
color = Color(0.5067887, 0.3832347, 0.33838338, 1)
script = ExtResource("1_vyht1")
area2D = NodePath("Area2D")
unlockedPosition = Vector2(749, -175)

[node name="Area2D" type="Area2D" parent="Exit"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Exit/Area2D"]
position = Vector2(77, 141)
shape = SubResource("RectangleShape2D_vyht1")

[node name="Player" parent="." node_paths=PackedStringArray("Light", "beastStealthMode") instance=ExtResource("1_pq8q7")]
z_index = 2
position = Vector2(-697, -89)
Light = NodePath("../BeastStealthMode/PointLight2D")
beastStealthMode = NodePath("../BeastStealthMode")

[node name="Camera2D" type="Camera2D" parent="Player"]
position = Vector2(3, -75)

[node name="WorldBounds" type="StaticBody2D" parent="."]

[node name="CollisionShapeFloor" type="CollisionShape2D" parent="WorldBounds"]
position = Vector2(0, 13)
shape = SubResource("WorldBoundaryShape2D_pq8q7")

[node name="FloorTextureRect" type="TextureRect" parent="WorldBounds"]
z_index = -1
offset_left = -2738.0
offset_top = -91.0
offset_right = 3271.0
offset_bottom = 421.0
texture = ExtResource("17_blcw0")
stretch_mode = 1

[node name="CollisionShapeWallRight" type="CollisionShape2D" parent="WorldBounds"]
position = Vector2(863, -17)
rotation = -1.5707964
shape = SubResource("WorldBoundaryShape2D_vvh5c")

[node name="RightWallTextureRect" type="TextureRect" parent="WorldBounds"]
offset_left = 873.0
offset_top = -1627.0
offset_right = 3302.0
offset_bottom = 17.0
texture = ExtResource("5_r3r3k")
stretch_mode = 1

[node name="CollisionShapeWallLeft" type="CollisionShape2D" parent="WorldBounds"]
position = Vector2(-851, 0)
rotation = 1.5707964
shape = SubResource("WorldBoundaryShape2D_pyidc")

[node name="LeftWallTextureRect" type="TextureRect" parent="WorldBounds"]
offset_left = -2940.0
offset_top = -1627.0
offset_right = -848.0
offset_bottom = 17.0
texture = ExtResource("5_r3r3k")
stretch_mode = 1

[node name="FoodPile" type="Node2D" parent="."]
z_index = 4
position = Vector2(695, -33)
script = ExtResource("5_l8v81")
foodTexture = ExtResource("5_jnlp7")

[node name="Sprite2D" type="Sprite2D" parent="FoodPile"]
position = Vector2(2.9999971, 17)
rotation = 0.18414275
scale = Vector2(2.1818182, 2.1818182)
texture = ExtResource("5_jnlp7")

[node name="Sprite2D2" type="Sprite2D" parent="FoodPile"]
position = Vector2(-15.000002, 21)
rotation = -0.2531144
scale = Vector2(2.1818182, 2.1818182)
texture = ExtResource("5_jnlp7")

[node name="Sprite2D3" type="Sprite2D" parent="FoodPile"]
position = Vector2(-9.000002, 4.000004)
rotation = 0.021431953
scale = Vector2(2.1818182, 2.1818182)
texture = ExtResource("5_jnlp7")

[node name="Area2D" type="Area2D" parent="FoodPile"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="FoodPile/Area2D"]
position = Vector2(-6, 18)
shape = SubResource("RectangleShape2D_jnlp7")

[node name="Prompt" parent="." instance=ExtResource("6_l8v81")]
visible = false
z_index = 3
position = Vector2(302, -32)

[node name="ChooseFishDialogue" type="Node2D" parent="."]

[node name="FishTanks" type="Node" parent="."]

[node name="FishTank" parent="FishTanks" instance=ExtResource("8_bf3um")]
position = Vector2(-332, -342)

[node name="ParticlesFishFood" parent="FishTanks/FishTank" index="0"]
z_index = 1
position = Vector2(16, -140)

[node name="ColorRect" parent="FishTanks/FishTank" index="1"]
visible = false

[node name="Fish" parent="FishTanks/FishTank" index="2"]
z_index = 1
position = Vector2(54, 4)

[node name="ColorRect2" parent="FishTanks/FishTank" index="3"]
offset_left = -9.0
offset_top = 88.0
offset_right = 71.0
offset_bottom = 110.0

[node name="Label" parent="FishTanks/FishTank" index="4"]
offset_left = 3.0
offset_top = 88.0
offset_right = 61.0
offset_bottom = 111.0

[node name="tank1" type="Sprite2D" parent="FishTanks/FishTank"]
position = Vector2(5, -14.999996)
scale = Vector2(0.31, 0.31)
texture = ExtResource("8_tw3kd")

[node name="bubbles" type="CPUParticles2D" parent="FishTanks/FishTank"]
position = Vector2(-53, 97)
texture = ExtResource("9_gd4vy")
lifetime = 1.6
speed_scale = 0.5
explosiveness = 0.2
randomness = 0.7
spread = 35.0
gravity = Vector2(0, -80)
initial_velocity_min = 2.0
initial_velocity_max = 5.0
scale_amount_min = 0.3
scale_amount_max = 0.5

[node name="FishTank2" parent="FishTanks" instance=ExtResource("8_bf3um")]
position = Vector2(-375, -704)

[node name="ParticlesFishFood" parent="FishTanks/FishTank2" index="0"]
z_index = 1

[node name="ColorRect" parent="FishTanks/FishTank2" index="1"]
visible = false

[node name="Fish" parent="FishTanks/FishTank2" index="2"]
z_index = 1
FishName = "Lily"

[node name="tank2" type="Sprite2D" parent="FishTanks/FishTank2"]
position = Vector2(44.455406, 108.50001)
scale = Vector2(0.31, 0.31)
texture = ExtResource("9_tw3kd")

[node name="bubbles" type="CPUParticles2D" parent="FishTanks/FishTank2"]
position = Vector2(-39, 151)
scale = Vector2(0.1594049, 0.21874999)
texture = ExtResource("9_gd4vy")
lifetime = 1.2
speed_scale = 0.5
explosiveness = 0.2
randomness = 0.7
spread = 35.0
gravity = Vector2(0, -80)
initial_velocity_min = 2.0
initial_velocity_max = 5.0
scale_amount_min = 0.3
scale_amount_max = 0.5

[node name="FishTank3" parent="FishTanks" instance=ExtResource("8_bf3um")]
position = Vector2(323, -379)

[node name="ParticlesFishFood" parent="FishTanks/FishTank3" index="0"]
z_index = 1
position = Vector2(49, -49)

[node name="ColorRect" parent="FishTanks/FishTank3" index="1"]
visible = false

[node name="Fish" parent="FishTanks/FishTank3" index="2"]
z_index = 1
FishName = "Martha"

[node name="ColorRect2" parent="FishTanks/FishTank3" index="3"]
offset_left = 26.0
offset_top = 189.0
offset_right = 106.0
offset_bottom = 211.0

[node name="Label" parent="FishTanks/FishTank3" index="4"]
offset_left = 38.0
offset_top = 189.0
offset_right = 96.0
offset_bottom = 212.0

[node name="tank3" type="Sprite2D" parent="FishTanks/FishTank3"]
position = Vector2(36.999992, 79)
scale = Vector2(0.31, 0.31)
texture = ExtResource("8_tw3kd")

[node name="bubbles" type="CPUParticles2D" parent="FishTanks/FishTank3"]
position = Vector2(146, 176)
texture = ExtResource("9_gd4vy")
lifetime = 1.6
speed_scale = 0.5
explosiveness = 0.2
randomness = 0.7
spread = 35.0
gravity = Vector2(0, -80)
initial_velocity_min = 2.0
initial_velocity_max = 5.0
scale_amount_min = 0.3
scale_amount_max = 0.5

[node name="BeastTank" parent="FishTanks" instance=ExtResource("8_bf3um")]
position = Vector2(34, -547)

[node name="ParticlesFishFood" parent="FishTanks/BeastTank" index="0"]
z_index = 1
position = Vector2(73, -156)

[node name="Fish" parent="FishTanks/BeastTank" index="2"]
z_index = 1
FishName = "??"

[node name="ColorRect2" parent="FishTanks/BeastTank" index="3"]
offset_left = 16.0
offset_top = 264.0
offset_right = 96.0
offset_bottom = 286.0

[node name="Label" parent="FishTanks/BeastTank" index="4"]
offset_left = 28.0
offset_top = 264.0
offset_right = 86.0
offset_bottom = 287.0

[node name="beasttank" type="Sprite2D" parent="FishTanks/BeastTank"]
position = Vector2(51, 53)
scale = Vector2(0.5, 0.5)
texture = ExtResource("11_qw60f")

[node name="bubbles" type="CPUParticles2D" parent="FishTanks/BeastTank"]
position = Vector2(145, 255)
scale = Vector2(0.1594049, 0.21874999)
texture = ExtResource("9_gd4vy")
lifetime = 1.6
speed_scale = 0.5
explosiveness = 0.2
randomness = 0.7
spread = 35.0
gravity = Vector2(0, -80)
scale_amount_min = 0.6
scale_amount_max = 0.6

[node name="CanvasLayer" parent="." instance=ExtResource("8_huihk")]

[node name="BeastStealthMode" parent="." instance=ExtResource("10_gd4vy")]
position = Vector2(83, -642)

[node name="PointLight2D" parent="BeastStealthMode" index="1"]
rotation = 0.7592182
scale = Vector2(1, 3.02)
shadow_enabled = true

[node name="StealthRoute1" type="Node2D" parent="." node_paths=PackedStringArray("Route", "Obstacles")]
script = ExtResource("17_50g4q")
Route = NodePath("BeastRoute")
Obstacles = NodePath("Obstacles")

[node name="BeastRoute" type="Node2D" parent="StealthRoute1" node_paths=PackedStringArray("waypoints")]
script = ExtResource("20_vte5o")
waypoints = [NodePath("Waypoint"), NodePath("Waypoint2")]

[node name="Waypoint" parent="StealthRoute1/BeastRoute" instance=ExtResource("21_po8fv")]
position = Vector2(-413, -34)

[node name="Waypoint2" parent="StealthRoute1/BeastRoute" instance=ExtResource("21_po8fv")]
position = Vector2(148, -31)

[node name="Obstacles" type="Node2D" parent="StealthRoute1"]

[node name="Obstacle" parent="StealthRoute1/Obstacles" instance=ExtResource("18_blcw0")]
offset_left = -167.0
offset_top = -256.0
offset_right = 26.0
offset_bottom = -9.0

[node name="LightOccluder2D" parent="StealthRoute1/Obstacles/Obstacle" index="0"]
position = Vector2(96.5, 123.5)
occluder = SubResource("OccluderPolygon2D_50g4q")

[node name="CollisionShape2D" parent="StealthRoute1/Obstacles/Obstacle/OccluderStaticBody2D" index="0"]
position = Vector2(96.5, 123.5)
shape = SubResource("RectangleShape2D_3dlgs")

[node name="Obstacle2" parent="StealthRoute1/Obstacles" instance=ExtResource("18_blcw0")]
offset_left = 335.0
offset_top = -159.0
offset_right = 463.0
offset_bottom = -4.0

[node name="LightOccluder2D" parent="StealthRoute1/Obstacles/Obstacle2" index="0"]
position = Vector2(64, 77.5)
occluder = SubResource("OccluderPolygon2D_vte5o")

[node name="CollisionShape2D" parent="StealthRoute1/Obstacles/Obstacle2/OccluderStaticBody2D" index="0"]
position = Vector2(64, 77.5)
shape = SubResource("RectangleShape2D_ab83r")

[node name="StealthRound2" type="Node2D" parent="." node_paths=PackedStringArray("Route", "Obstacles")]
script = ExtResource("17_50g4q")
Route = NodePath("BeastRoute")
Obstacles = NodePath("Obstacles")

[node name="BeastRoute" type="Node2D" parent="StealthRound2" node_paths=PackedStringArray("waypoints")]
script = ExtResource("20_vte5o")
waypoints = [NodePath("Waypoint"), NodePath("Waypoint2"), NodePath("Waypoint3")]

[node name="Waypoint" parent="StealthRound2/BeastRoute" instance=ExtResource("21_po8fv")]
position = Vector2(-382, -34)

[node name="Waypoint2" parent="StealthRound2/BeastRoute" instance=ExtResource("21_po8fv")]
position = Vector2(11, -31)

[node name="Waypoint3" parent="StealthRound2/BeastRoute" instance=ExtResource("21_po8fv")]
position = Vector2(240, -28)

[node name="Obstacles" type="Node2D" parent="StealthRound2"]
visible = false

[node name="Obstacle" parent="StealthRound2/Obstacles" instance=ExtResource("18_blcw0")]
offset_top = -196.0

[node name="LightOccluder2D" parent="StealthRound2/Obstacles/Obstacle" index="0"]
position = Vector2(65.5, 102)
occluder = SubResource("OccluderPolygon2D_3dlgs")

[node name="CollisionShape2D" parent="StealthRound2/Obstacles/Obstacle/OccluderStaticBody2D" index="0"]
position = Vector2(65.5, 102)
shape = SubResource("RectangleShape2D_po8fv")

[node name="Obstacle2" parent="StealthRound2/Obstacles" instance=ExtResource("18_blcw0")]
offset_left = 102.0
offset_top = -118.0
offset_right = 198.0

[node name="LightOccluder2D" parent="StealthRound2/Obstacles/Obstacle2" index="0"]
position = Vector2(48, 63)
occluder = SubResource("OccluderPolygon2D_po8fv")

[node name="CollisionShape2D" parent="StealthRound2/Obstacles/Obstacle2/OccluderStaticBody2D" index="0"]
position = Vector2(48, 63)
shape = SubResource("RectangleShape2D_ub8w1")

[node name="Obstacle3" parent="StealthRound2/Obstacles" instance=ExtResource("18_blcw0")]
offset_left = 282.0
offset_top = -120.0
offset_right = 378.0

[node name="LightOccluder2D" parent="StealthRound2/Obstacles/Obstacle3" index="0"]
position = Vector2(48, 64)
occluder = SubResource("OccluderPolygon2D_po8fv")

[node name="CollisionShape2D" parent="StealthRound2/Obstacles/Obstacle3/OccluderStaticBody2D" index="0"]
position = Vector2(48, 64)
shape = SubResource("RectangleShape2D_ynlg5")

[node name="RoundDebugLabel" type="Label" parent="."]
offset_left = -1560.0
offset_top = -626.0
offset_right = -1501.0
offset_bottom = -603.0
text = "Round: "

[editable path="FishTanks/FishTank"]
[editable path="FishTanks/FishTank2"]
[editable path="FishTanks/FishTank3"]
[editable path="FishTanks/BeastTank"]
[editable path="BeastStealthMode"]
[editable path="StealthRoute1/Obstacles/Obstacle"]
[editable path="StealthRoute1/Obstacles/Obstacle2"]
[editable path="StealthRound2/Obstacles/Obstacle"]
[editable path="StealthRound2/Obstacles/Obstacle2"]
[editable path="StealthRound2/Obstacles/Obstacle3"]
